
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
<link rel="stylesheet" href="https://unpkg.com/ngx-bootstrap/datepicker/bs-datepicker.css"> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<div class="container">
  <h1>Pending Approval</h1>
  <h4>Incoming Requests Forwarded</h4>
  
  <div class="row mb-3  div_header">
    <div class="col-12 col-md-4 mb-3">
      <!-- <i class="fas fa-search"></i> Search -->
      
      <div class="search_bar_container">
        <i class="search_icon fas fa-search "></i>
        <input class="search_bar form-control" [(ngModel)]="email" placeholder="Search by email" (keyup.enter)="getRequestByEmail()" />
      </div>  

    </div>
    <div class="col-8 col-md-3 mb-3" style="position: relative;">
      <input type="text" placeholder="Select Date"  class="form-control" bsDatepicker [(ngModel)]="selectedDate" (ngModelChange)="fetchEmployeeRequestByDate()" >
      <i class="far fa-calendar date_icon"></i>
      
    </div>

    <div class="col-12 col-md-3 mb-2" ngbDropdown >
       
          <button type="button" class="btn btn-default sort_menu form-control" id="dropdownConfig" ngbDropdownToggle>{{ selectedSortOption }}</button>
          <div ngbDropdownMenu aria-labelledby="dropdownConfig">
              <button (click)="setSortOption('Sort')" ngbDropdownItem >Select</button>
              <button (click)="setSortOption('Email')" ngbDropdownItem>Email</button>
              <button (click)="setSortOption('RequestId')" ngbDropdownItem >RequestId</button>
              <button (click)="setSortOption('Date')" ngbDropdownItem>Date</button>
          </div>
        
    </div>
    <div class="col-8 col-md-2 mb-2">
      <button class="see_all_button" (click)="seeAllRequest()">See All</button>
    </div>
  </div>

  <div class="table_responsive">
    <table class="table custom_table">
      <thead>
        <tr>
          <th>Request ID</th>
          <th>Employee</th>
          <th>Project Code</th>
          <th>Date</th>
          <!-- <th>Mode</th> -->
          <th>Status</th>
        </tr>
      </thead>
      
        <tbody>
          <tr *ngFor="let req of employeeRequest">
            <td>{{req.requestId}} </td>
            <td><div class="employee_div">
              {{req.employeeName}}
              <span>{{req.email}} </span>
            </div> </td>
            <td>{{req.projectCode}} </td>
            <td>{{req.date | date:'dd/MM/yyyy'}} </td>
            <!-- <td><button class="button-mode">{{req.mode}} </button></td> -->
            <td><button class="button_status">Open</button> </td>
          </tr>
        </tbody>
    </table>
    
  </div>
  <pagination [itemsPerPage]="itemsPerPage" [totalItems]="totalItems" [(ngModel)]="currentPage" (pageChanged)="pageChanged($event)" ></pagination>
</div>
